!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self).miniPm=t()}(this,function(){function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r;!function(e){e[e.URGENT=1]="URGENT",e[e.IDLE=2]="IDLE"}(r||(r={}));var o,a=window,i=a.performance,s=a.navigator,u=a.console,c=document,l="mini-pmðŸ¢ï¼š",f=function(e){return u.log.apply(u,[l,e].concat([].slice.call(arguments,1)))},d=function(e){return u.warn.apply(u,[l,e].concat([].slice.call(arguments,1)))},p={isObserverResourceTiming:!1,isObserverElementTiming:!1,maxTime:15e3,captureError:!0,reportData:null,analyticsTracker:function(e){f(e)},recordOptions:{}};function m(e){var t=null==e?void 0:e.host;return Boolean(t&&t.shadowRoot&&t.shadowRoot===e)}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(o||(o={}));var v=1,h=RegExp("[^a-z0-9-_]");function g(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(y).join(""):null}catch(e){return null}}function y(e){return function(e){return"styleSheet"in e}(e)?g(e.styleSheet)||"":e.cssText}var b=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,S=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,k=/^(data:)([^,]*),(.*)/i;function w(e,t){return(e||"").replace(b,function(e,r,o,a,i,s){var u,c=o||i||s,l=r||a||"";if(!c)return e;if(!S.test(c))return"url("+l+c+l+")";if(k.test(c))return"url("+l+c+l+")";if("/"===c[0])return"url("+l+(((u=t).indexOf("//")>-1?u.split("/").slice(0,3).join("/"):u.split("/")[0]).split("?")[0]+c)+l+")";var f=t.split("/"),d=c.split("/");f.pop();for(var p,m=n(d);!(p=m()).done;){var v=p.value;"."!==v&&(".."===v?f.pop():f.push(v))}return"url("+l+f.join("/")+l+")"})}var C,T,E,x,O=/^[^ \t\n\r\u000c]+/,M=/^[, \t\n\r\u000c]+/;function N(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function I(){var e=document.createElement("a");return e.href="",e.href}function L(e,t,n,r){return"src"===n||("href"===n||"xlink:href"===n)&&r?N(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(n+=(r=o[0]).length,r):""}for(var o=[];r(M),!(n>=t.length);){var a=r(O);if(","===a.slice(-1))a=N(e,a.substring(0,a.length-1)),o.push(a);else{var i="";a=N(e,a);for(var s=!1;;){var u=t.charAt(n);if(""===u){o.push((a+i).trim());break}if(s)")"===u&&(s=!1);else{if(","===u){n+=1,o.push((a+i).trim());break}"("===u&&(s=!0)}i+=u,n+=1}}}return o.join(", ")}(e,r):"style"===n&&r?w(r,I()):r:N(e,r)}function D(e,t,n){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if("string"==typeof t){if(e.classList.contains(t))return!0}else e.classList.forEach(function(e){if(t.test(e))return!0});return!(!n||!e.matches(n))||D(e.parentNode,t,n)}return D(e.parentNode,t,n)}function _(e){return void 0===e?"":e.toLowerCase()}function R(e,t){var n,r=t.doc,a=t.map,i=t.blockClass,s=t.blockSelector,u=t.maskTextClass,c=t.maskTextSelector,l=t.skipChild,f=void 0!==l&&l,d=t.inlineStylesheet,p=void 0===d||d,y=t.maskInputOptions,b=void 0===y?{}:y,S=t.maskTextFn,k=t.slimDOMOptions,C=t.recordCanvas,T=void 0!==C&&C,E=t.onSerialize,x=t.onIframeLoad,O=t.iframeLoadTimeout,M=void 0===O?5e3:O,N=t.preserveWhiteSpace,F=void 0===N||N,A=function(e,t){var n,r,a=t.doc,i=t.blockClass,s=t.blockSelector,u=t.maskTextClass,c=t.maskTextSelector,l=t.inlineStylesheet,f=t.maskInputOptions,d=void 0===f?{}:f,p=t.maskTextFn,m=t.recordCanvas;if(a.__sn){var v=a.__sn.id;n=1===v?void 0:v}switch(e.nodeType){case e.DOCUMENT_NODE:return{type:o.Document,childNodes:[],rootId:n};case e.DOCUMENT_TYPE_NODE:return{type:o.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:n};case e.ELEMENT_NODE:for(var y=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++)if(t.test(e.classList[r]))return!0;return!!n&&e.matches(n)}(e,i,s),b=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return h.test(t)?"div":t}(e),S={},k=0,C=Array.from(e.attributes);k<C.length;k++){var T=C[k],E=T.name;S[E]=L(a,b,E,T.value)}if("link"===b&&l){var x=Array.from(a.styleSheets).find(function(t){return t.href===e.href}),O=g(x);O&&(delete S.rel,delete S.href,S._cssText=w(O,x.href))}if("style"===b&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var M=g(e.sheet);M&&(S._cssText=w(M,I()))}if("input"===b||"textarea"===b||"select"===b){var N=e.value;"radio"!==S.type&&"checkbox"!==S.type&&"submit"!==S.type&&"button"!==S.type&&N?S.value=d[S.type]||d[b]?"*".repeat(N.length):N:e.checked&&(S.checked=e.checked)}if("option"===b&&S.value===e.parentElement.value&&(S.selected=e.selected),"canvas"===b&&m&&(S.rr_dataURL=e.toDataURL()),"audio"!==b&&"video"!==b||(S.rr_mediaState=e.paused?"paused":"played"),e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop),y){var _=e.getBoundingClientRect();S={class:S.class,rr_width:_.width+"px",rr_height:_.height+"px"}}return"iframe"===b&&delete S.src,{type:o.Element,tagName:b,attributes:S,childNodes:[],isSVG:(r=e,"svg"===r.tagName||r instanceof SVGElement||void 0),needBlock:y,rootId:n};case e.TEXT_NODE:var R=e.parentNode&&e.parentNode.tagName,F=e.textContent,A="STYLE"===R||void 0,z="SCRIPT"===R||void 0;return A&&F&&(F=w(F,I())),z&&(F="SCRIPT_PLACEHOLDER"),!A&&!z&&D(e,u,c)&&F&&(F=p?p(F):F.replace(/[\S]/g,"*")),{type:o.Text,textContent:F||"",isStyle:A,rootId:n};case e.CDATA_SECTION_NODE:return{type:o.CDATA,textContent:"",rootId:n};case e.COMMENT_NODE:return{type:o.Comment,textContent:e.textContent||"",rootId:n};default:return!1}}(e,{doc:r,blockClass:i,blockSelector:s,maskTextClass:u,maskTextSelector:c,inlineStylesheet:p,maskInputOptions:b,maskTextFn:S,recordCanvas:T});if(!A)return console.warn(e,"not serialized"),null;n="__sn"in e?e.__sn.id:!function(e,t){if(t.comment&&e.type===o.Comment)return!0;if(e.type===o.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(_(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===_(e.attributes.name)||"icon"===_(e.attributes.rel)||"apple-touch-icon"===_(e.attributes.rel)||"shortcut icon"===_(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&_(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(_(e.attributes.property).match(/^(og|twitter|fb):/)||_(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===_(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===_(e.attributes.name)||"googlebot"===_(e.attributes.name)||"bingbot"===_(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===_(e.attributes.name)||"generator"===_(e.attributes.name)||"framework"===_(e.attributes.name)||"publisher"===_(e.attributes.name)||"progid"===_(e.attributes.name)||_(e.attributes.property).match(/^article:/)||_(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===_(e.attributes.name)||"yandex-verification"===_(e.attributes.name)||"csrf-token"===_(e.attributes.name)||"p:domain_verify"===_(e.attributes.name)||"verify-v1"===_(e.attributes.name)||"verification"===_(e.attributes.name)||"shopify-checkout-api-token"===_(e.attributes.name)))return!0}}return!1}(A,k)&&(F||A.type!==o.Text||A.isStyle||A.textContent.replace(/^\s+|\s+$/gm,"").length)?v++:-2;var z=Object.assign(A,{id:n});if(e.__sn=z,-2===n)return null;a[n]=e,E&&E(e);var P=!f;if(z.type===o.Element&&(P=P&&!z.needBlock,delete z.needBlock),(z.type===o.Document||z.type===o.Element)&&P){k.headWhitespace&&A.type===o.Element&&"head"===A.tagName&&(F=!1);for(var j={doc:r,map:a,blockClass:i,blockSelector:s,maskTextClass:u,maskTextSelector:c,skipChild:f,inlineStylesheet:p,maskInputOptions:b,maskTextFn:S,slimDOMOptions:k,recordCanvas:T,preserveWhiteSpace:F,onSerialize:E,onIframeLoad:x,iframeLoadTimeout:M},H=0,W=Array.from(e.childNodes);H<W.length;H++){var B=R(W[H],j);B&&z.childNodes.push(B)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot){z.isShadowHost=!0;for(var U=0,q=Array.from(e.shadowRoot.childNodes);U<q.length;U++){var V=R(q[U],j);V&&(V.isShadow=!0,z.childNodes.push(V))}}}return e.parentNode&&m(e.parentNode)&&(z.isShadow=!0),z.type===o.Element&&"iframe"===z.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,a=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var i="about:blank";r.location.href===i&&e.src!==i&&""!==e.src?e.addEventListener("load",t):t()}else{var s=setTimeout(function(){a||(t(),a=!0)},n);e.addEventListener("load",function(){clearTimeout(s),a=!0,t()})}}}(e,function(){var t=e.contentDocument;if(t&&x){var n=R(t,{doc:t,map:a,blockClass:i,blockSelector:s,maskTextClass:u,maskTextSelector:c,skipChild:!1,inlineStylesheet:p,maskInputOptions:b,maskTextFn:S,slimDOMOptions:k,recordCanvas:T,preserveWhiteSpace:F,onSerialize:E,onIframeLoad:x,iframeLoadTimeout:M});n&&x(e,n)}},M),z}function F(e,t,n){void 0===n&&(n=document);var r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom"}(C||(C={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag"}(T||(T={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd"}(E||(E={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(x||(x={}));var A="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",z={map:{},getId:function(){return console.error(A),-1},getNode:function(){return console.error(A),null},removeNodeFromMap:function(){console.error(A)},has:function(){return console.error(A),!1},reset:function(){console.error(A)}};function P(e,t,n){void 0===n&&(n={});var r=null,o=0;return function(a){var i=Date.now();o||!1!==n.leading||(o=i);var s=t-(i-o),u=this,c=arguments;s<=0||s>t?(r&&(window.clearTimeout(r),r=null),o=i,e.apply(u,c)):r||!1===n.trailing||(r=window.setTimeout(function(){o=!1===n.leading?0:Date.now(),r=null,e.apply(u,c)},s))}}function j(e,t,n,r,o){void 0===o&&(o=window);var a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout(function(){n.set.call(t,e)},0),a&&a.set&&a.set.call(this,e)}}),function(){return j(e,t,a||{},!0)}}function H(e,t,n){try{if(!(t in e))return function(){};var r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,function(){e[t]=r}}catch(e){return function(){}}}function W(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function B(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function U(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;return"string"==typeof t?n=e.classList.contains(t):e.classList.forEach(function(e){t.test(e)&&(n=!0)}),n||U(e.parentNode,t)}return U(e.parentNode,t)}function q(e){return"__sn"in e&&-2===e.__sn.id}function V(e,t){if(m(e))return!1;var n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||V(e.parentNode,t))}function $(e){return Boolean(e.changedTouches)}function J(e){return"__sn"in e&&e.__sn.type===o.Element&&"iframe"===e.__sn.tagName}function X(e){return Boolean(null==e?void 0:e.shadowRoot)}function Y(e){return"__ln"in e}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(z=new Proxy(z,{get:function(e,t,n){return"map"===t&&console.error(A),Reflect.get(e,t,n)}}));var G=function(){function e(){this.length=0,this.head=null}var t=e.prototype;return t.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++){var r;t=(null==(r=t)?void 0:r.next)||null}return t},t.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Y(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Y(e.nextSibling)&&e.nextSibling.__ln.previous){var r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++},t.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),K=function(e,t){return e+"@"+t};function Z(e){return"__sn"in e}var Q=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(){if(!e.frozen&&!e.locked){for(var t=[],r=new G,o=function(t){for(var n=t,r=-2;-2===r;)r=(n=n&&n.nextSibling)&&e.mirror.getId(n);return-1===r&&U(t.nextSibling,e.blockClass)&&(r=null),r},a=function(n){var a,i=n.getRootNode?null==(a=n.getRootNode())?void 0:a.host:null,s=!e.doc.contains(n)&&!e.doc.contains(i);if(n.parentNode&&!s){var u=m(n.parentNode)?e.mirror.getId(i):e.mirror.getId(n.parentNode),c=o(n);if(-1===u||-1===c)return r.addNode(n);var l=R(n,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,onSerialize:function(t){J(t)&&e.iframeManager.addIframe(t),X(n)&&e.shadowDomManager.addShadowRoot(n.shadowRoot,document)},onIframeLoad:function(t,n){e.iframeManager.attachIframe(t,n)}});l&&t.push({parentId:u,nextId:c,node:l})}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());for(var i,s=n(e.movedSet);!(i=s()).done;){var u=i.value;te(e.removes,u,e.mirror)&&!e.movedSet.has(u.parentNode)||a(u)}for(var c,l=n(e.addedSet);!(c=l()).done;){var f=c.value;ne(e.droppedSet,f)||te(e.removes,f,e.mirror)?ne(e.movedSet,f)?a(f):e.droppedSet.add(f):a(f)}for(var d=null;r.length;){var p=null;if(d){var v=e.mirror.getId(d.value.parentNode),h=o(d.value);-1!==v&&-1!==h&&(p=d)}if(!p)for(var g=r.length-1;g>=0;g--){var y=r.get(g),b=e.mirror.getId(y.value.parentNode),S=o(y.value);if(-1!==b&&-1!==S){p=y;break}}if(!p){for(;r.head;)r.removeNode(r.head.value);break}d=p.previous,r.removeNode(p.value),a(p.value)}var k={texts:e.texts.map(function(t){return{id:e.mirror.getId(t.node),value:t.value}}).filter(function(t){return e.mirror.has(t.id)}),attributes:e.attributes.map(function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}}).filter(function(t){return e.mirror.has(t.id)}),removes:e.removes,adds:t};(k.texts.length||k.attributes.length||k.removes.length||k.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.emissionCallback(k))}},this.processMutation=function(t){if(!q(t.target))switch(t.type){case"characterData":var n=t.target.textContent;U(t.target,e.blockClass)||n===t.oldValue||e.texts.push({value:D(t.target,e.maskTextClass,e.maskTextSelector)&&n?e.maskTextFn?e.maskTextFn(n):n.replace(/[\S]/g,"*"):n,node:t.target});break;case"attributes":var r=t.target.getAttribute(t.attributeName);if(U(t.target,e.blockClass)||r===t.oldValue)return;var o=e.attributes.find(function(e){return e.node===t.target});o||e.attributes.push(o={node:t.target,attributes:{}}),o.attributes[t.attributeName]=L(e.doc,t.target.tagName,t.attributeName,r);break;case"childList":t.addedNodes.forEach(function(n){return e.genAdds(n,t.target)}),t.removedNodes.forEach(function(n){var r=e.mirror.getId(n),o=m(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);U(n,e.blockClass)||U(t.target,e.blockClass)||q(n)||(e.addedSet.has(n)?(ee(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===r||V(t.target,e.mirror)||(e.movedSet.has(n)&&e.movedMap[K(r,o)]?ee(e.movedSet,n):e.removes.push({parentId:o,id:r,isShadow:!!m(t.target)||void 0})),e.mapRemoves.push(n))})}},this.genAdds=function(t,n){if(!(U(t,e.blockClass)||n&&U(n,e.blockClass))){if(Z(t)){if(q(t))return;e.movedSet.add(t);var r=null;n&&Z(n)&&(r=n.__sn.id),r&&(e.movedMap[K(t.__sn.id,r)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);t.childNodes.forEach(function(t){return e.genAdds(t)})}}}var t=e.prototype;return t.init=function(e,t,n,r,o,a,i,s,u,c,l,f,d,p){this.blockClass=t,this.blockSelector=n,this.maskTextClass=r,this.maskTextSelector=o,this.inlineStylesheet=a,this.maskInputOptions=i,this.maskTextFn=s,this.recordCanvas=u,this.slimDOMOptions=c,this.emissionCallback=e,this.doc=l,this.mirror=f,this.iframeManager=d,this.shadowDomManager=p},t.freeze=function(){this.frozen=!0},t.unfreeze=function(){this.frozen=!1,this.emit()},t.isFrozen=function(){return this.frozen},t.lock=function(){this.locked=!0},t.unlock=function(){this.locked=!1,this.emit()},e}();function ee(e,t){e.delete(t),t.childNodes.forEach(function(t){return ee(e,t)})}function te(e,t,n){var r=t.parentNode;if(!r)return!1;var o=n.getId(r);return!!e.some(function(e){return e.id===o})||te(e,r,n)}function ne(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||ne(e,n))}function re(e){if(!e||!e.outerHTML)return"";for(var t="";e.parentElement;){var n=e.localName;if(!n)break;n=n.toLowerCase();var r=e.parentElement,o=[];if(r.children&&r.children.length>0)for(var a=0;a<r.children.length;a++){var i=r.children[a];i.localName&&i.localName.toLowerCase&&i.localName.toLowerCase()===n&&o.push(i)}o.length>1&&(n+=":eq("+o.indexOf(e)+")"),t=n+(t?">"+t:""),e=r}return t}function oe(e,t){var n={numOfKeysLimit:50};Object.assign(n,t);var r=[],o=[];return JSON.stringify(e,function(e,t){if(r.length>0){var a=r.indexOf(this);~a?r.splice(a+1):r.push(this),~a?o.splice(a,Infinity,e):o.push(e),~r.indexOf(t)&&(t=r[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,r.indexOf(t)).join(".")+"]")}else r.push(t);if(null==t)return t;if("object"==typeof(i=t)&&Object.keys(i).length>n.numOfKeysLimit||"function"==typeof i)return function(e){var t=e.toString();return n.stringLengthLimit&&t.length>n.stringLengthLimit&&(t=t.slice(0,n.stringLengthLimit)+"..."),t}(t);var i;if(t instanceof Event){var s={};for(var u in t){var c=t[u];s[u]=Array.isArray(c)?re(c.length?c[0]:null):c}return s}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t})}var ae=function(){function e(e){this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}return e.prototype.toString=function(){var e=this.lineNumber||"",t=this.columnNumber||"";return this.functionName?this.functionName+" ("+this.fileName+":"+e+":"+t+")":this.fileName+":"+e+":"+t},e}(),ie=/(^|@)\S+:\d+/,se=/^\s*at .*(\S+:\d+|\(native\))/m,ue=/^(eval@)?(\[native code])?$/,ce={parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(se))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw new Error("Cannot parse given url: "+e);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(se)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=t.match(/ (\((.+):(\d+):(\d+)\)$)/),r=(t=n?t.replace(n[0],""):t).split(/\s+/).slice(1),o=this.extractLocation(n?n[1]:r.pop()),a=r.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new ae({functionName:a,fileName:i,lineNumber:o[1],columnNumber:o[2]})},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return!e.match(ue)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new ae({functionName:e});var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,o=this.extractLocation(e.replace(t,""));return new ae({functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],o=2,a=n.length;o<a;o+=2){var i=t.exec(n[o]);i&&r.push(new ae({fileName:i[2],lineNumber:parseFloat(i[1])}))}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],o=0,a=n.length;o<a;o+=2){var i=t.exec(n[o]);i&&r.push(new ae({functionName:i[3]||void 0,fileName:i[2],lineNumber:parseFloat(i[1])}))}return r},parseOpera11:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(ie)&&!e.match(/^Error created at/)},this).map(function(e){var t=e.split("@"),n=this.extractLocation(t.pop()),r=(t.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new ae({functionName:r,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})},this)}},le=[];function fe(e,t,n,r,o,a,i,s,u,c,l,f,d,p,m){var v,h,g=new Q;le.push(g),g.init(e,n,r,o,a,i,s,u,c,l,t,f,d,p);var y=window.MutationObserver||window.__rrMutationObserver,b=null==(v=window)||null==(h=v.Zone)||null==h.__symbol__?void 0:h.__symbol__("MutationObserver");b&&window[b]&&(y=window[b]);var S=new y(g.processMutations.bind(g));return S.observe(m,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),S}var de,pe,me=["INPUT","TEXTAREA","SELECT"],ve=new WeakMap,he=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}var t=e.prototype;return t.addIframe=function(e){this.iframes.set(e,!0)},t.addLoadListener=function(e){this.loadListener=e},t.attachIframe=function(e,t){var n;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null==(n=this.loadListener)||n.call(this,e)},e}(),ge=function(){function e(e){this.mutationCb=e.mutationCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror}return e.prototype.addShadowRoot=function(e,t){fe(this.mutationCb,t,this.bypassOptions.blockClass,this.bypassOptions.blockSelector,this.bypassOptions.maskTextClass,this.bypassOptions.maskTextSelector,this.bypassOptions.inlineStylesheet,this.bypassOptions.maskInputOptions,this.bypassOptions.maskTextFn,this.bypassOptions.recordCanvas,this.bypassOptions.slimDOMOptions,this.mirror,this.bypassOptions.iframeManager,this,e)},e}();function ye(t){return e({},t,{timestamp:Date.now()})}var be={map:{},getId:function(e){return e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this;delete this.map[e.__sn&&e.__sn.id],e.childNodes&&e.childNodes.forEach(function(e){return t.removeNodeFromMap(e)})},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}};function Se(t){void 0===t&&(t={});var r=t.emit,o=t.checkoutEveryNms,a=t.checkoutEveryNth,i=t.blockClass,s=void 0===i?"rr-block":i,u=t.blockSelector,c=void 0===u?null:u,l=t.ignoreClass,f=void 0===l?"rr-ignore":l,d=t.maskTextClass,p=void 0===d?"rr-mask":d,m=t.maskTextSelector,v=void 0===m?null:m,h=t.inlineStylesheet,g=void 0===h||h,y=t.maskAllInputs,b=t.maskInputOptions,S=t.slimDOMOptions,k=t.maskInputFn,w=t.maskTextFn,x=t.hooks,O=t.packFn,M=t.sampling,N=void 0===M?{}:M,I=t.mousemoveWait,L=t.recordCanvas,D=void 0!==L&&L,_=t.collectFonts,A=void 0!==_&&_,z=t.recordLog,q=void 0!==z&&z;if(!r)throw new Error("emit function is required");void 0!==I&&void 0===N.mousemove&&(N.mousemove=I);var V,Y,G=!0===y?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:void 0!==b?b:{},K=!0===S||"all"===S?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===S,headMetaDescKeywords:"all"===S}:S||{},Z={level:["assert","clear","count","countReset","debug","dir","dirxml","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:console},Q=q?!0===q?Z:Object.assign({},Z,q):{};void 0===V&&(V=window),"NodeList"in V&&!V.NodeList.prototype.forEach&&(V.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in V&&!V.DOMTokenList.prototype.forEach&&(V.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1});var ee=0;de=function(e,t){var n;if(null==(n=le[0])||!n.isFrozen()||e.type===C.FullSnapshot||e.type===C.IncrementalSnapshot&&e.data.source===T.Mutation||le.forEach(function(e){return e.unfreeze()}),r(O?O(e):e,t),e.type===C.FullSnapshot)Y=e,ee=0;else if(e.type===C.IncrementalSnapshot){if(e.data.source===T.Mutation&&e.data.isAttachIframe)return;ee++,(a&&ee>=a||o&&e.timestamp-Y.timestamp>o)&&pe(!0)}};var te=function(t){de(ye({type:C.IncrementalSnapshot,data:e({source:T.Mutation},t)}))},ne=new he({mutationCb:te}),re=new ge({mutationCb:te,bypassOptions:{blockClass:s,blockSelector:c,maskTextClass:p,maskTextSelector:v,inlineStylesheet:g,maskInputOptions:G,maskTextFn:w,recordCanvas:D,slimDOMOptions:K,iframeManager:ne},mirror:be});pe=function(e){var t,n,r,o,a,i,u,l,f,d;void 0===e&&(e=!1),de(ye({type:C.Meta,data:{href:window.location.href,width:B(),height:W()}}),e),le.forEach(function(e){return e.lock()});var m=function(e,t){var n=t||{},r=n.blockClass,o=n.blockSelector,a=n.maskTextClass,i=n.maskTextSelector,s=n.inlineStylesheet,u=n.recordCanvas,c=n.maskAllInputs,l=void 0!==c&&c,f=n.slimDOM,d=void 0!==f&&f,p={};return[R(e,{doc:e,map:p,blockClass:void 0===r?"rr-block":r,blockSelector:void 0===o?null:o,maskTextClass:void 0===a?"rr-mask":a,maskTextSelector:void 0===i?null:i,skipChild:!1,inlineStylesheet:void 0===s||s,maskInputOptions:!0===l?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===l?{password:!0}:l,maskTextFn:n.maskTextFn,slimDOMOptions:!0===d||"all"===d?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===d,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===d?{}:d,recordCanvas:void 0!==u&&u,preserveWhiteSpace:n.preserveWhiteSpace,onSerialize:n.onSerialize,onIframeLoad:n.onIframeLoad,iframeLoadTimeout:n.iframeLoadTimeout}),p]}(document,{blockClass:s,blockSelector:c,maskTextClass:p,maskTextSelector:v,inlineStylesheet:g,maskAllInputs:G,maskTextFn:w,slimDOM:K,recordCanvas:D,onSerialize:function(e){J(e)&&ne.addIframe(e),X(e)&&re.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){ne.attachIframe(e,t)}}),h=m[0],y=m[1];if(!h)return console.warn("Failed to snapshot the document");be.map=y,de(ye({type:C.FullSnapshot,data:{node:h,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null==(t=document)?void 0:t.documentElement.scrollLeft)||(null==(n=document)||null==(r=n.body)||null==(o=r.parentElement)?void 0:o.scrollLeft)||(null==(a=document)?void 0:a.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null==(i=document)?void 0:i.documentElement.scrollTop)||(null==(u=document)||null==(l=u.body)||null==(f=l.parentElement)?void 0:f.scrollTop)||(null==(d=document)?void 0:d.body.scrollTop)||0}}})),le.forEach(function(e){return e.unlock()})};try{var ae=[];ae.push(F("DOMContentLoaded",function(){de(ye({type:C.DomContentLoaded,data:{}}))}));var ie=function(t){return function(t,r){void 0===r&&(r={}),function(e,t){var n=e.mutationCb,r=e.mousemoveCb,o=e.mouseInteractionCb,a=e.scrollCb,i=e.viewportResizeCb,s=e.inputCb,u=e.mediaInteractionCb,c=e.styleSheetRuleCb,l=e.canvasMutationCb,f=e.fontCb,d=e.logCb;e.mutationCb=function(){var e=[].slice.call(arguments);t.mutation&&t.mutation.apply(t,e),n.apply(void 0,e)},e.mousemoveCb=function(){var e=[].slice.call(arguments);t.mousemove&&t.mousemove.apply(t,e),r.apply(void 0,e)},e.mouseInteractionCb=function(){var e=[].slice.call(arguments);t.mouseInteraction&&t.mouseInteraction.apply(t,e),o.apply(void 0,e)},e.scrollCb=function(){var e=[].slice.call(arguments);t.scroll&&t.scroll.apply(t,e),a.apply(void 0,e)},e.viewportResizeCb=function(){var e=[].slice.call(arguments);t.viewportResize&&t.viewportResize.apply(t,e),i.apply(void 0,e)},e.inputCb=function(){var e=[].slice.call(arguments);t.input&&t.input.apply(t,e),s.apply(void 0,e)},e.mediaInteractionCb=function(){var e=[].slice.call(arguments);t.mediaInteaction&&t.mediaInteaction.apply(t,e),u.apply(void 0,e)},e.styleSheetRuleCb=function(){var e=[].slice.call(arguments);t.styleSheetRule&&t.styleSheetRule.apply(t,e),c.apply(void 0,e)},e.canvasMutationCb=function(){var e=[].slice.call(arguments);t.canvasMutation&&t.canvasMutation.apply(t,e),l.apply(void 0,e)},e.fontCb=function(){var e=[].slice.call(arguments);t.font&&t.font.apply(t,e),f.apply(void 0,e)},e.logCb=function(){var e=[].slice.call(arguments);t.log&&t.log.apply(t,e),d.apply(void 0,e)}}(t,r);var o,a,i,s=fe(t.mutationCb,t.doc,t.blockClass,t.blockSelector,t.maskTextClass,t.maskTextSelector,t.inlineStylesheet,t.maskInputOptions,t.maskTextFn,t.recordCanvas,t.slimDOMOptions,t.mirror,t.iframeManager,t.shadowDomManager,t.doc),u=function(e,t,n,r){if(!1===t.mousemove)return function(){};var o,a="number"==typeof t.mousemove?t.mousemove:50,i=[],s=P(function(t){var n=Date.now()-o;e(i.map(function(e){return e.timeOffset-=n,e}),t),i=[],o=null},"number"==typeof t.mousemoveCallback?t.mousemoveCallback:500),u=P(function(e){var t=e.target,n=$(e)?e.changedTouches[0]:e,a=n.clientX,u=n.clientY;o||(o=Date.now()),i.push({x:a,y:u,id:r.getId(t),timeOffset:Date.now()-o}),s(e instanceof MouseEvent?T.MouseMove:e instanceof DragEvent?T.Drag:T.TouchMove)},a,{trailing:!1}),c=[F("mousemove",u,n),F("touchmove",u,n),F("drag",u,n)];return function(){c.forEach(function(e){return e()})}}(t.mousemoveCb,t.sampling,t.doc,t.mirror),c=function(e,t,n,r,o){if(!1===o.mouseInteraction)return function(){};var a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,i=[];return Object.keys(E).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]}).forEach(function(o){var a=o.toLowerCase(),s=function(t){return function(o){if(!U(o.target,r)){var a=$(o)?o.changedTouches[0]:o;if(a){var i=n.getId(o.target);e({type:E[t],id:i,x:a.clientX,y:a.clientY})}}}}(o);i.push(F(a,s,t))}),function(){i.forEach(function(e){return e()})}}(t.mouseInteractionCb,t.doc,t.mirror,t.blockClass,t.sampling),l=function(e,t,n,r,o){return F("scroll",P(function(o){if(o.target&&!U(o.target,r)){var a=n.getId(o.target);if(o.target===t){var i=t.scrollingElement||t.documentElement;e({id:a,x:i.scrollLeft,y:i.scrollTop})}else e({id:a,x:o.target.scrollLeft,y:o.target.scrollTop})}},o.scroll||100))}(t.scrollCb,t.doc,t.mirror,t.blockClass,t.sampling),f=(o=t.viewportResizeCb,a=-1,i=-1,F("resize",P(function(){var e=W(),t=B();a===e&&i===t||(o({width:Number(t),height:Number(e)}),a=e,i=t)},200),window)),d=function(t,n,r,o,a,i,s,u){function c(e){var t=e.target;if(t&&t.tagName&&!(me.indexOf(t.tagName)<0)&&!U(t,o)){var r=t.type;if("password"!==r&&!t.classList.contains(a)){var u=t.value,c=!1;"radio"===r||"checkbox"===r?c=t.checked:(i[t.tagName.toLowerCase()]||i[r])&&(u=s?s(u):"*".repeat(u.length)),l(t,{text:u,isChecked:c});var f=t.name;"radio"===r&&f&&c&&n.querySelectorAll('input[type="radio"][name="'+f+'"]').forEach(function(e){e!==t&&l(e,{text:e.value,isChecked:!c})})}}}function l(n,o){var a=ve.get(n);if(!a||a.text!==o.text||a.isChecked!==o.isChecked){ve.set(n,o);var i=r.getId(n);t(e({},o,{id:i}))}}var f=("last"===u.input?["change"]:["input","change"]).map(function(e){return F(e,c,n)}),d=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),p=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"]];return d&&d.set&&f.push.apply(f,p.map(function(e){return j(e[0],e[1],{set:function(){c({target:this})}})})),function(){f.forEach(function(e){return e()})}}(t.inputCb,t.doc,t.mirror,t.blockClass,t.ignoreClass,t.maskInputOptions,t.maskInputFn,t.sampling),p=function(e,t,n){var r=function(r){return function(o){var a=o.target;a&&!U(a,t)&&e({type:"play"===r?0:1,id:n.getId(a)})}},o=[F("play",r("play")),F("pause",r("pause"))];return function(){o.forEach(function(e){return e()})}}(t.mediaInteractionCb,t.blockClass,t.mirror),m=function(e,t){var n=CSSStyleSheet.prototype.insertRule;CSSStyleSheet.prototype.insertRule=function(r,o){var a=t.getId(this.ownerNode);return-1!==a&&e({id:a,adds:[{rule:r,index:o}]}),n.apply(this,arguments)};var r=CSSStyleSheet.prototype.deleteRule;return CSSStyleSheet.prototype.deleteRule=function(n){var o=t.getId(this.ownerNode);return-1!==o&&e({id:o,removes:[{index:n}]}),r.apply(this,arguments)},function(){CSSStyleSheet.prototype.insertRule=n,CSSStyleSheet.prototype.deleteRule=r}}(t.styleSheetRuleCb,t.mirror),v=t.recordCanvas?function(e,t,r){for(var o,a=Object.getOwnPropertyNames(CanvasRenderingContext2D.prototype),i=[],s=function(){var n=o.value;try{if("function"!=typeof CanvasRenderingContext2D.prototype[n])return"continue";var a=H(CanvasRenderingContext2D.prototype,n,function(o){return function(){var a=this,i=[].slice.call(arguments);return U(this.canvas,t)||setTimeout(function(){var t=[].concat(i);"drawImage"===n&&t[0]&&t[0]instanceof HTMLCanvasElement&&(t[0]=t[0].toDataURL()),e({id:r.getId(a.canvas),property:n,args:t})},0),o.apply(this,i)}});i.push(a)}catch(t){var s=j(CanvasRenderingContext2D.prototype,n,{set:function(t){e({id:r.getId(this.canvas),property:n,args:[t],setter:!0})}});i.push(s)}},u=n(a);!(o=u()).done;)s();return function(){i.forEach(function(e){return e()})}}(t.canvasMutationCb,t.blockClass,t.mirror):function(){},h=t.collectFonts?function(e){var t=[],n=new WeakMap,r=FontFace;window.FontFace=function(e,t,o){var a=new r(e,t,o);return n.set(a,{family:e,buffer:"string"!=typeof t,descriptors:o,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),a};var o=H(document.fonts,"add",function(t){return function(r){return setTimeout(function(){var t=n.get(r);t&&(e(t),n.delete(r))},0),t.apply(this,[r])}});return t.push(function(){window.FonFace=r}),t.push(o),function(){t.forEach(function(e){return e()})}}(t.fontCb):function(){},g=t.logOptions?function(e,t){var r=this,o=t.logger;if(!o)return function(){};var a=0,i=[];if(t.level.includes("error")&&window){var s=window.onerror;window.onerror=function(n,o,a,i,u){s&&s.apply(r,[n,o,a,i,u]);var c=ce.parse(u).map(function(e){return e.toString()}),l=[oe(n,t.stringifyOptions)];e({level:"error",trace:c,payload:l})},i.push(function(){window.onerror=s})}for(var u,c=n(t.level);!(u=c()).done;)i.push(l(o,u.value));return function(){i.forEach(function(e){return e()})};function l(n,r){var o=this;return n[r]?H(n,r,function(n){return function(){var i=[].slice.call(arguments);n.apply(o,i);try{var s=ce.parse(new Error).map(function(e){return e.toString()}).splice(1),u=i.map(function(e){return oe(e,t.stringifyOptions)});++a<t.lengthThreshold?e({level:r,trace:s,payload:u}):a===t.lengthThreshold&&e({level:"warn",trace:[],payload:[oe("The number of log records reached the threshold.")]})}catch(e){n.apply(void 0,["rrweb logger error:",e].concat(i))}}}):function(){}}}(t.logCb,t.logOptions):function(){};return function(){s.disconnect(),u(),c(),l(),f(),d(),p(),m(),v(),h(),g()}}({mutationCb:te,mousemoveCb:function(e,t){return de(ye({type:C.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(t){return de(ye({type:C.IncrementalSnapshot,data:e({source:T.MouseInteraction},t)}))},scrollCb:function(t){return de(ye({type:C.IncrementalSnapshot,data:e({source:T.Scroll},t)}))},viewportResizeCb:function(t){return de(ye({type:C.IncrementalSnapshot,data:e({source:T.ViewportResize},t)}))},inputCb:function(t){return de(ye({type:C.IncrementalSnapshot,data:e({source:T.Input},t)}))},mediaInteractionCb:function(t){return de(ye({type:C.IncrementalSnapshot,data:e({source:T.MediaInteraction},t)}))},styleSheetRuleCb:function(t){return de(ye({type:C.IncrementalSnapshot,data:e({source:T.StyleSheetRule},t)}))},canvasMutationCb:function(t){return de(ye({type:C.IncrementalSnapshot,data:e({source:T.CanvasMutation},t)}))},fontCb:function(t){return de(ye({type:C.IncrementalSnapshot,data:e({source:T.Font},t)}))},logCb:function(t){return de(ye({type:C.IncrementalSnapshot,data:e({source:T.Log},t)}))},blockClass:s,ignoreClass:f,maskTextClass:p,maskTextSelector:v,maskInputOptions:G,inlineStylesheet:g,sampling:N,recordCanvas:D,collectFonts:A,doc:t,maskInputFn:k,maskTextFn:w,logOptions:Q,blockSelector:c,slimDOMOptions:K,mirror:be,iframeManager:ne,shadowDomManager:re},x)};ne.addLoadListener(function(e){ae.push(ie(e.contentDocument))});var se=function(){pe(),ae.push(ie(document))};return"interactive"===document.readyState||"complete"===document.readyState?se():ae.push(F("load",function(){de(ye({type:C.Load,data:{}})),se()},window)),function(){ae.forEach(function(e){return e()})}}catch(e){console.warn(e)}}Se.addCustomEvent=function(e,t){if(!de)throw new Error("please add custom event after start recording");de(ye({type:C.Custom,data:{tag:e,payload:t}}))},Se.freezePage=function(){le.forEach(function(e){return e.freeze()})},Se.takeFullSnapshot=function(e){if(!pe)throw new Error("please take full snapshot after start recording");pe(e)},Se.mirror=be;try{require("worker_threads")}catch(e){}var ke=Uint8Array,we=Uint16Array,Ce=Uint32Array,Te=new ke([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ee=new ke([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xe=new ke([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Oe=function(e,t){for(var n=new we(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var o=new Ce(n[30]),a=1;a<30;++a)for(var i=n[a];i<n[a+1];++i)o[i]=i-n[a]<<5|a;return[n,o]},Me=Oe(Te,2),Ne=Me[1];Me[0][28]=258,Ne[258]=28;for(var Ie=Oe(Ee,0)[1],Le=new we(32768),De=0;De<32768;++De){var _e=(43690&De)>>>1|(21845&De)<<1;Le[De]=((65280&(_e=(61680&(_e=(52428&_e)>>>2|(13107&_e)<<2))>>>4|(3855&_e)<<4))>>>8|(255&_e)<<8)>>>1}for(var Re=function(e,t,n){for(var r=e.length,o=0,a=new we(t);o<r;++o)++a[e[o]-1];var i,s=new we(t);for(o=0;o<t;++o)s[o]=s[o-1]+a[o-1]<<1;if(n){i=new we(1<<t);var u=15-t;for(o=0;o<r;++o)if(e[o])for(var c=o<<4|e[o],l=t-e[o],f=s[e[o]-1]++<<l,d=f|(1<<l)-1;f<=d;++f)i[Le[f]>>>u]=c}else for(i=new we(r),o=0;o<r;++o)e[o]&&(i[o]=Le[s[e[o]-1]++]>>>15-e[o]);return i},Fe=new ke(288),Ae=0;Ae<144;++Ae)Fe[Ae]=8;for(var ze=144;ze<256;++ze)Fe[ze]=9;for(var Pe=256;Pe<280;++Pe)Fe[Pe]=7;for(var je=280;je<288;++je)Fe[je]=8;for(var He=new ke(32),We=0;We<32;++We)He[We]=5;var Be=Re(Fe,9,0),Ue=Re(He,5,0),qe=function(e){return(e/8|0)+(7&e&&1)},Ve=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof we?we:e instanceof Ce?Ce:ke)(n-t);return r.set(e.subarray(t,n)),r},$e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Je=function e(t,n,r){var o=new Error(n||$e[t]);if(o.code=t,Error.captureStackTrace&&Error.captureStackTrace(o,e),!r)throw o;return o},Xe=function(e,t,n){var r=t/8|0;e[r]|=n<<=7&t,e[r+1]|=n>>>8},Ye=function(e,t,n){var r=t/8|0;e[r]|=n<<=7&t,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Ge=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,a=n.slice();if(!o)return[rt,0];if(1==o){var i=new ke(n[0].s+1);return i[n[0].s]=1,[i,1]}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var s=n[0],u=n[1],c=0,l=1,f=2;for(n[0]={s:-1,f:s.f+u.f,l:s,r:u};l!=o-1;)s=n[n[c].f<n[f].f?c++:f++],u=n[c!=l&&n[c].f<n[f].f?c++:f++],n[l++]={s:-1,f:s.f+u.f,l:s,r:u};for(var d=a[0].s,p=1;p<o;++p)a[p].s>d&&(d=a[p].s);var m=new we(d+1),v=Ke(n[l-1],m,0);if(v>t){var h=0,g=0,y=v-t,b=1<<y;for(a.sort(function(e,t){return m[t.s]-m[e.s]||e.f-t.f});h<o;++h){var S=a[h].s;if(!(m[S]>t))break;g+=b-(1<<v-m[S]),m[S]=t}for(g>>>=y;g>0;){var k=a[h].s;m[k]<t?g-=1<<t-m[k]++-1:++h}for(;h>=0&&g;--h){var w=a[h].s;m[w]==t&&(--m[w],++g)}v=t}return[new ke(m),v]},Ke=function e(t,n,r){return-1==t.s?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},Ze=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new we(++t),r=0,o=e[0],a=1,i=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++a;else{if(!o&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(o),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(o);a=1,o=e[s]}return[n.subarray(0,r),t]},Qe=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},et=function(e,t,n){var r=n.length,o=qe(t+2);e[o]=255&r,e[o+1]=r>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var a=0;a<r;++a)e[o+a+4]=n[a];return 8*(o+4+r)},tt=function(e,t,n,r,o,a,i,s,u,c,l){Xe(t,l++,n),++o[256];for(var f=Ge(o,15),d=f[0],p=f[1],m=Ge(a,15),v=m[0],h=m[1],g=Ze(d),y=g[0],b=g[1],S=Ze(v),k=S[0],w=S[1],C=new we(19),T=0;T<y.length;++T)C[31&y[T]]++;for(var E=0;E<k.length;++E)C[31&k[E]]++;for(var x=Ge(C,7),O=x[0],M=x[1],N=19;N>4&&!O[xe[N-1]];--N);var I,L,D,_,R=c+5<<3,F=Qe(o,Fe)+Qe(a,He)+i,A=Qe(o,d)+Qe(a,v)+i+14+3*N+Qe(C,O)+(2*C[16]+3*C[17]+7*C[18]);if(R<=F&&R<=A)return et(t,l,e.subarray(u,u+c));if(Xe(t,l,1+(A<F)),l+=2,A<F){I=Re(d,p,0),L=d,D=Re(v,h,0),_=v;var z=Re(O,M,0);Xe(t,l,b-257),Xe(t,l+5,w-1),Xe(t,l+10,N-4),l+=14;for(var P=0;P<N;++P)Xe(t,l+3*P,O[xe[P]]);l+=3*N;for(var j=[y,k],H=0;H<2;++H)for(var W=j[H],B=0;B<W.length;++B){var U=31&W[B];Xe(t,l,z[U]),l+=O[U],U>15&&(Xe(t,l,W[B]>>>5&127),l+=W[B]>>>12)}}else I=Be,L=Fe,D=Ue,_=He;for(var q=0;q<s;++q)if(r[q]>255){var V=r[q]>>>18&31;Ye(t,l,I[V+257]),l+=L[V+257],V>7&&(Xe(t,l,r[q]>>>23&31),l+=Te[V]);var $=31&r[q];Ye(t,l,D[$]),l+=_[$],$>3&&(Ye(t,l,r[q]>>>5&8191),l+=Ee[$])}else Ye(t,l,I[r[q]]),l+=L[r[q]];return Ye(t,l,I[256]),l+L[256]},nt=new Ce([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rt=new ke(0),ot="undefined"!=typeof TextEncoder&&new TextEncoder,at="undefined"!=typeof TextDecoder&&new TextDecoder;try{at.decode(rt,{stream:!0})}catch(e){}function it(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(at)return at.decode(e);var o=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return[t,Ve(e,n-1)];o?3==o?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=String.fromCharCode(1&o?(31&r)<<6|63&e[n++]:(15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}}(e),a=o[0];return o[1].length&&Je(8),a}var st=function(t){var n=e({},t,{v:"v1"});return it(function(e,t){t||(t={});var n=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=0|n.length,i=0;i!=a;){for(var s=Math.min(i+2655,a);i<s;++i)o+=r+=n[i];r=(65535&r)+15*(r>>16),o=(65535&o)+15*(o>>16)}e=r,t=o},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}}();n.p(e);var r,o,a,i,s,u=function(e,t,n,r,o,a){var i=e.length,s=new ke(2+i+5*(1+Math.ceil(i/7e3))+4),u=s.subarray(2,s.length-4),c=0;if(!t||i<8)for(var l=0;l<=i;l+=65535){var f=l+65535;f<i?c=et(u,c,e.subarray(l,f)):(u[l]=!0,c=et(u,c,e.subarray(l,i)))}else{for(var d=nt[t-1],p=d>>>13,m=8191&d,v=(1<<n)-1,h=new we(32768),g=new we(v+1),y=Math.ceil(n/3),b=2*y,S=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&v},k=new Ce(25e3),w=new we(288),C=new we(32),T=0,E=0,x=0,O=0,M=0,N=0;x<i;++x){var I=S(x),L=32767&x,D=g[I];if(h[L]=D,g[I]=L,M<=x){var _=i-x;if((T>7e3||O>24576)&&_>423){c=tt(e,u,0,k,w,C,E,O,N,x-N,c),O=T=E=0,N=x;for(var R=0;R<286;++R)w[R]=0;for(var F=0;F<30;++F)C[F]=0}var A=2,z=0,P=m,j=L-D&32767;if(_>2&&I==S(x-j))for(var H=Math.min(p,_)-1,W=Math.min(32767,x),B=Math.min(258,_);j<=W&&--P&&L!=D;){if(e[x+A]==e[x+A-j]){for(var U=0;U<B&&e[x+U]==e[x+U-j];++U);if(U>A){if(A=U,z=j,U>H)break;for(var q=Math.min(j,U-2),V=0,$=0;$<q;++$){var J=x-j+$+32768&32767,X=J-h[J]+32768&32767;X>V&&(V=X,D=J)}}}j+=(L=D)-(D=h[L])+32768&32767}if(z){k[O++]=268435456|Ne[A]<<18|Ie[z];var Y=31&Ne[A],G=31&Ie[z];E+=Te[Y]+Ee[G],++w[257+Y],++C[G],M=x+A,++T}else k[O++]=e[x],++w[e[x]]}}c=tt(e,u,!0,k,w,C,E,O,N,x-N,c)}return Ve(s,0,2+qe(c)+4)}(r=e,null==(o=t).level?6:o.level,null==o.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(r.length)))):12+o.mem);return s=0==(i=t.level)?0:i<6?1:9==i?3:2,(a=u)[0]=120,a[1]=s<<6|(s?32-2*s:1),function(e,t,n){for(;n;++t)e[t]=n,n>>>=8}(u,u.length-4,n.d()),u}(function(e,t){if(ot)return ot.encode(e);for(var n=e.length,r=new ke(e.length+(e.length>>1)),o=0,a=function(e){r[o++]=e},i=0;i<n;++i){if(o+5>r.length){var s=new ke(o+8+(n-i<<1));s.set(r),r=s}var u=e.charCodeAt(i);u<128?a(u):u<2048?(a(192|u>>6),a(128|63&u)):u>55295&&u<57344?(a(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++i))>>18),a(128|u>>12&63),a(128|u>>6&63),a(128|63&u)):(a(224|u>>12),a(128|u>>6&63),a(128|63&u))}return Ve(r,0,o)}(JSON.stringify(n))),!0)},ut=function(){function t(){var t=this;this.eventsMatrix=[[]],this.globalErrorTrace(),this.networkErrorTrace(),this.promiseErrorTrace(),this.iframeErrorTrace(),Se(e({},p.recordOptions,{emit:function(e,n){n&&t.eventsMatrix.push([]),t.eventsMatrix[t.eventsMatrix.length-1].push(e)},recordLog:!1,checkoutEveryNth:10,packFn:st}))}t.getInstance=function(){return this.instance||(this.instance=new t),this.instance};var n=t.prototype;return n.globalErrorTrace=function(){var e=this;a.onerror=function(t,n,o,a,i){d({source:n,lineno:o,colno:a,error:i});var s,u=e.eventsMatrix.length;if(p.errEventRoute&&u>=2){var c,l=e.eventsMatrix[u-2].concat(e.eventsMatrix[u-1]);null==(c=p.reportData)||c.fetch(r.IDLE,JSON.stringify({events:l}),p.errEventRoute)}return p.errLogRoute&&(null==(s=p.reportData)||s.fetch(r.IDLE,JSON.stringify({source:n,lineno:o,colno:a,error:JSON.stringify({message:null==i?void 0:i.message,stack:null==i?void 0:i.stack,name:null==i?void 0:i.name})}),p.errLogRoute)),!0}},n.networkErrorTrace=function(){a.addEventListener("error",function(e){e.target!==a&&d(e.target)},!0)},n.promiseErrorTrace=function(){window.addEventListener("unhandledrejection",function(e){return e.preventDefault(),d(e.reason),!0})},n.iframeErrorTrace=function(){for(var e=a.frames,t=0;t<e.length;t++)e[t].addEventListener("error",function(e){d(e)},!0),e[t].addEventListener("unhandledrejection",function(e){d(e)},!0)},t}();ut.instance=null;var ct=function(){function e(){}return e.prototype.fetch=function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){switch(n=p.fetchDomain+n,e){case r.URGENT:if(a.fetch)fetch(n,{body:t,method:"POST",keepalive:!0});else{var o=new XMLHttpRequest;o.open("post",n,!0),o.setRequestHeader("Content-Type","application/json"),o.send(t),o.onload=function(){return o=null}}return;default:if(s.sendBeacon)navigator.sendBeacon(n,t);else{var i=new Image;i.src=n+"?body="+t,i.onload=function(){return i=null}}}}),e}(),lt=function(){return i&&!!i.getEntriesByType&&!!i.now&&!!i.mark},ft=function(e){return parseFloat((e/Math.pow(1024,2)).toFixed(2))},dt=function(e){return parseFloat(e.toFixed(2))},pt=function(e){"requestIdleCallback"in a?a.requestIdleCallback(e,{timeout:3e3}):e()},mt=function(){try{return Promise.resolve(s.storage.estimate()).then(function(e){var t=e.usage,n=e.usageDetails,r={quota:ft(e.quota||0),usage:ft(t||0),usageDetails:n};return r.usageDetails&&Object.keys(r.usageDetails||{}).forEach(function(e){return r.usageDetails[e]=ft(r.usageDetails[e])}),r})}catch(e){return Promise.reject(e)}};function vt(e,t,n){if(!e.s){if(n instanceof ht){if(!n.s)return void(n.o=vt.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(vt.bind(null,e,t),vt.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var ht=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,o=this.s;if(o){var a=1&o?t:n;if(a){try{vt(r,1,a(this.v))}catch(e){vt(r,2,e)}return r}return this}return this.o=function(e){try{var o=e.v;1&e.s?vt(r,1,t?t(o):o):n?vt(r,1,n(o)):vt(r,2,o)}catch(e){vt(r,2,e)}},r},e}();function gt(e){return e instanceof ht&&1&e.s}var yt="4g",bt=!1,St=function(){try{return Promise.resolve(new Promise(function(e){var t={};"connection"in s&&(t.connection={downlink:s.connection.downlink,effectiveType:s.connection.effectiveType,rtt:s.connection.rtt,saveData:s.connection.saveData},bt=t.connection.saveData||bt,yt=t.connection.effectiveType||yt),"fetch"in window&&pt(function(){try{var n=function(){t.connection.bandwidth=((o[4]-o[3])/((r[5]-r[4])/1e3)).toFixed(2)+" k/s",e(t)},r=[],o=[0,0,0,50,100],a=o.map(function(e){return function(){return new Promise(function(t){try{return Promise.resolve(fetch("http://performance-monitoring.zhourengui.top/performance-monitoring/doppler-velocity?size="+e)).then(function(){t(!0)})}catch(e){return Promise.reject(e)}})}});r.push(+new Date);var i=function(e,t,n){for(var r;;){var o=e();if(gt(o)&&(o=o.v),!o)return a;if(o.then){r=0;break}var a=n();if(a&&a.then){if(!gt(a)){r=1;break}a=a.s}}var i=new ht,s=vt.bind(null,i,2);return(0===r?o.then(c):1===r?a.then(u):(void 0).then(function(){(o=e())?o.then?o.then(c).then(void 0,s):c(o):vt(i,1,a)})).then(void 0,s),i;function u(t){a=t;do{if(!(o=e())||gt(o)&&!o.v)return void vt(i,1,a);if(o.then)return void o.then(c).then(void 0,s);gt(a=n())&&(a=a.v)}while(!a||!a.then);a.then(u).then(void 0,s)}function c(e){e?(a=n())&&a.then?a.then(u).then(void 0,s):u(a):vt(i,1,a)}}(function(){return!!a.length},0,function(){var e=a.shift();return Promise.resolve(null==e?void 0:e()).then(function(){r.push(+new Date)})});return Promise.resolve(i&&i.then?i.then(n):n())}catch(e){return Promise.reject(e)}}),t.userAgent=s.userAgent}))}catch(e){return Promise.reject(e)}},kt=function(){try{var e={};if(lt()){var t=i.getEntriesByType("navigation")[0];if(t){var n=t.responseEnd,r=t.responseStart,o=t.requestStart;e={fetchTime:n-t.fetchStart,workerTime:n-t.workerStart,networkTime:n-o,downloadTime:n-r,timeToFirstByte:r-o,headerSize:t.decodedBodySize-t.transferSize||0,dnsLookupTime:t.domainLookupStart-t.domainLookupEnd,tcpTime:t.connectStart-t.connectEnd||0,firstPaintTime:n-r||0,domParseTime:t.domComplete-t.domInteractive,domRenderTime:t.domContentLoadedEventEnd-t.domContentLoadedEventStart||0,onloadTime:t.loadEventEnd-t.loadEventStart}}}return Promise.resolve(e)}catch(e){return Promise.reject(e)}},wt=function(){return s.deviceMemory<=4||s.hardwareConcurrency<=4},Ct=function(e,t){return!!["slow-2g","2g","3g"].includes(e)||wt()||t},Tt=function(){var e;if(s)return{deviceMemory:s.deviceMemory||0,hardwareConcurrency:s.hardwareConcurrency||0,serviceWorkerStatus:"serviceWorker"in s?null!=(e=s.serviceWorker)&&e.controller?"controlled":"supported":"unsupported",isLowEndDevice:wt(),isLowEndExperience:Ct(yt,bt)}},Et=[1e3,2500],xt=[2500,4e3],Ot=[100,300],Mt=[.1,.25],Nt=[300,600],It={fp:Et,fcp:Et,lcp:xt,lcpFinal:xt,fid:Ot,fidVitals:Ot,cls:Mt,clsFinal:Mt,tbt:Nt,tbt5S:Nt,tbt10S:Nt,tbtFinal:Nt},Lt=function(e,t){return It[e]?t<=It[e][0]?"good":t<=It[e][1]?"needsImprovement":"poor":null},Dt=function(e,t,n){pt(function(){("hidden"!==c.visibilityState||t.includes("Final"))&&p.analyticsTracker&&p.analyticsTracker({metricName:t,data:e,eventProperties:n,navigatorInformation:Tt(),vitalsScore:Lt(t,e)})})},_t=function(e,t,n){Object.keys(t).forEach(function(e){"number"==typeof t[e]&&(t[e]=dt(t[e]))}),Dt(t,e,n)},Rt=function(e,t,n){dt(t)<=p.maxTime&&Dt(t,e,n)},Ft={value:0},At={value:0},zt={value:0},Pt={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},jt={value:0},Ht=function(e){var t=e.pop();t&&(zt.value=t.renderTime||t.startTime)},Wt=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.identifier&&Rt(n.identifier,n.startTime,{performanceEntry:n})}},Bt=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("self"!==n.name&&n.startTime<Ft.value)return;n.startTime-50>0&&(At.value+=n.startTime,Rt("longtask",n.startTime))}},Ut=function(e){var t=e.pop();t&&(Rt("fidVitals",t.processingStart-t.startTime,{performanceEntry:t}),Rt("fid",t.duration,{performanceEntry:t})),Xt("first-input"),Rt("lcp",zt.value),$t["layout-shift"]&&"function"==typeof $t["layout-shift"].takeRecords&&$t["layout-shift"].takeRecords(),Rt("cls",jt.value),Rt("bt",At.value),setTimeout(function(){Rt("bt5S",At.value)},5e3),setTimeout(function(){Rt("bt10S",At.value),_t("dataConsumption",Pt.value)},1e4)},qt=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(_t("resourceTiming",n),n.decodedBodySize&&n.initiatorType){var r=n.decodedBodySize/1e3;Pt.value[n.initiatorType]+=r,Pt.value.total+=r}}},Vt=function(e){var t=e.pop();t&&!t.hadRecentInput&&t.value&&(jt.value+=t.value)},$t={},Jt=function(e,t){try{var n=new PerformanceObserver(function(e){return t(e.getEntries())});return n.observe({type:e,buffered:!0}),n}catch(e){u.warn("PerformanceMonitoring obseverðŸŒ²:","mini-pm: "+e)}return null},Xt=function(e){var t;$t[e]&&(null==(t=$t[e])||t.disconnect()),delete $t[e]},Yt=function(){$t["largest-contentful-paint"]&&(Rt("lcpFinal",zt.value),Xt("largest-contentful-paint")),$t["layout-shift"]&&("function"==typeof $t["layout-shift"].takeRecords&&$t["layout-shift"].takeRecords(),Rt("clsFinal",jt.value),Xt("layout-shift")),$t.longtask&&(Rt("btFinal",At.value),Xt("longtask"))};return function(e){void 0===e&&(e={});var t,n=e.isObserverResourceTiming,o=e.maxTime,a=e.captureError,i=e.fetchDomain,s=e.errLogRoute,u=e.errEventRoute,l=e.logRoute,d=e.analyticsTracker,m=e.recordOptions;p.isObserverElementTiming=!!e.isObserverElementTiming,p.isObserverResourceTiming=!!n,p.maxTime=o||p.maxTime,p.captureError=a||p.captureError,p.fetchDomain=i,p.errLogRoute=s,p.errEventRoute=u,p.logRoute=l,p.reportData=new ct,p.analyticsTracker=d||p.analyticsTracker,p.recordOptions=m||p.recordOptions,f("1.0.0"),a&&i&&ut.getInstance(),lt()&&("hidden"===c.visibilityState&&c.addEventListener("visibilitychange",Yt),i&&l&&Promise.all([kt(),St(),mt()]).then(function(e){var t;null==(t=p.reportData)||t.fetch(r.IDLE,JSON.stringify(e),l)}),$t.paint=Jt("paint",(t=function(){return $t.longtask=Jt("longtask",Bt)},function(e){for(var n=0;n<e.length;n++){var r=e[n];"first-paint"===r.name?Rt("fp",r.startTime):"first-contentful-paint"===r.name&&(Ft.value=r.startTime,Rt("fcp",r.startTime),t(),Xt("paint"))}})),$t["first-input"]=Jt("first-input",Ut),$t["largest-contentful-paint"]=Jt("largest-contentful-paint",Ht),p.isObserverResourceTiming&&Jt("resource",qt),$t["layout-shift"]=Jt("layout-shift",Vt),p.isObserverElementTiming&&Jt("element",Wt))}});
//# sourceMappingURL=mini-pm.umd.js.map
